<!DOCTYPE html>
<html>
  <head>
    <title>Login page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--  bulma  -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <!--  Fontawesome  -->
    <script
      src="https://kit.fontawesome.com/1d19cec74a.js"
      crossorigin="anonymous"
    ></script>

    <!--  Jquery   -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"
      integrity="sha512-3j3VU6WC5rPQB4Ld1jnLV7Kd5xr+cq9avvhwqzbH/taCRNURoeEpoPBK9pDyeukwSxwRPJ8fDgvYXd6SkaZ2TA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script>
      function login() {
        let userid = $("#userid").val();
        let userpw = $("#userpw").val();

        console.log(userid, userpw);

        $.ajax({
          type: "POST",
          url: "/api/login",
          data: {
            id_give: userid,
            pw_give: userpw,
          },
          success: function (response) {
            if (response["result"] == "success") {
              $.cookie("token", response["token"]);
              window.location.href = "/main";
              console.log("good");
            } else {
              alert(response["msg"]);
            }
          },
          //   success: function (response) {
          //     alert
          //     if (response["result"] == "success") {
          //       $.cookie("mytoken", response["token"], { path: "/main" });
          //       alert("로그인 되었습니다!");
          //       window.location.replace("/main");
          //     }
          //     else {
          //       alert(response["msg"], "실패");
          //     }
          //   },
        });
      }
    </script>

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script> -->
  </head>
  <body>
    <section class="hero is-info is-fullheight">
      <div class="hero-body">
        <div class="container">
          <div class="columns is-centered">
            <div class="column is-6-tablet is-6-desktop is-5-widescreen">
              <form action="" class="box">
                <img src="../static/image/logo.jpg" alt="로고"/>
                <p
                  class="label"
                  style="
                    text-align: center;
                    margin-bottom: 30px;
                    font-size: 30px;
                  "
                >
                  로그인
                </p>
                
                <div class="field">
                  <label for="" class="label">ID</label>
                  <div class="control has-icons-left">
                    <input
                      type="text"
                      placeholder="아이디"
                      class="input"
                      id="userid"
                      required
                    />
                    <span class="icon is-small is-left">
                      <i class="fa fa-user"></i>
                    </span>
                  </div>
                </div>
                <div class="field">
                  <label for="" class="label">Password</label>
                  <div class="control has-icons-left">
                    <input
                      type="password"
                      placeholder="*******"
                      class="input"
                      id="userpw"
                      required
                    />
                    <span class="icon is-small is-left">
                      <i class="fa fa-lock"></i>
                    </span>
                  </div>
                </div>
                <div class="field" style="text-align: center">
                  <button class="button is-link" onClick="login()">
                    로그인
                  </button>
                </div>
                <div class="field" style="text-align: right">
                  <a href="/signup" class="button is-link is-small is-inverted">
                    회원가입
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
